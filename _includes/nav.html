{% assign current_lang = site.active_lang | default: page.lang | default: site.default_lang %}
{% assign nav_items = site.data.navigation[current_lang] | default: site.data.navigation[site.default_lang] %}
{% assign lang_prefix = "" %}
{% unless current_lang == site.default_lang %}
{% assign lang_prefix = "/" | append: current_lang %}
{% endunless %}

<nav>
  <ul>
    {% for item in nav_items %}
    <li data-page-id="{{ item.id }}" {% if item.id==page.pageId or item.id==page.parentPageId %} class="-active" {%
      endif %}>
      {% assign item_url = lang_prefix | append: item.url %}
      <a href="{{ item_url | relative_url }}">{{ item.title }}</a>
      {% if item.children %}
      <ul>
        {% for c in item.children %}
        <li data-page-id="{{ c.id }}" {% if c.id==page.pageId or c.id==page.pageId %} class="-active" {% endif %}>
          {% assign child_url = lang_prefix | append: c.url %}
          <a href="{{ child_url | relative_url }}">{{ c.title }}</a>
        </li>
        {% endfor %}
      </ul>
      {% endif %}
      {% if item.id == 'datasets' and page.pageId == 'datasets' %}
      <div id="DatasetsSortFilterView">
        <div class="sort">
          <label for="sortSegment">Sort:</label>

          <div id="sortSegment" class="segmented-buttons-container" role="tablist" aria-label="Sort datasets">
            <button class="button-view" type="button" data-sort="date" aria-pressed="true">Date</button>
            <button class="button-view" type="button" data-sort="name" aria-pressed="false">Name</button>
            <button class="button-view" type="button" data-sort="triples" aria-pressed="false">Triples</button>
          </div>
        </div>
        <div class="order">
          <label for="sortOrderSegment">Order:</label>
          <div id="sortOrderSegment" class="segmented-buttons-container" role="tablist" aria-label="Sort order">
            <button class="button-view" type="button" data-order="desc" aria-pressed="true">Desc</button>
            <button class="button-view" type="button" data-order="asc" aria-pressed="false">Asc</button>
          </div>
        </div>
        <div class="filter">
          <label for="tagSelect">Filter:</label>
          <select id="tagSelect" aria-label="Filter tags">
            <option value="">All tags</option>
          </select>
        </div>
      </div>
      {% endif %}
    </li>
    {% endfor %}
  </ul>
</nav>